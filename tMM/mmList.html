<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>淘妹妹</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>

        $(function () {
            iniHeadtype();
        });

        //初始化导航栏
        function iniHeadtype() {
            $.ajax({
                type: 'post',
                url: 'https://route.showapi.com/126-1',
                dataType: 'json',
                data: {
                    "showapi_timestamp": formatterDateTime(),
                    "showapi_appid": '94764', //这里需要改成自己的appid
                    "showapi_sign": '2c83ec02e5794f178d1ee7a3fb7856ec',  //这里需要改成自己的应用的密钥secret

                },
                error: function (XmlHttpRequest, textStatus, errorThrown) {
                    alert("错误，请联系管理员!");
                },
                success: function (result) {
                    $(".navbar-nav li").remove();
                    var obj = result.showapi_res_body;
                    var allTypeList = obj.allTypeList;
                    var ul = $(".navbar-nav");
                    $.each(allTypeList, function (index, objType) {
                        var active = index == 0 ? "class='active'" : "";
                        var li = $("<li " + active + " onclick='changeType(this);'><a href='#'>" + objType + "</a></li>");
                        ul.append(li);

                        //初始化第一个
                        if (index == 0) {
                            iniTypeMMList(objType);
                        }
                    });
                }
            });
        }

        function changeType(obj) {
            $(obj).siblings().removeClass("active");
            $(obj).addClass("active");
            iniTypeMMList($(obj).text());
        }

        function iniTypeMMList(mmType) {
            $.ajax({
                type: 'post',
                url: 'https://route.showapi.com/126-2',
                dataType: 'json',
                data: {
                    "showapi_timestamp": formatterDateTime(),
                    "showapi_appid": '94764',
                    "showapi_sign": '2c83ec02e5794f178d1ee7a3fb7856ec',
                    "type": mmType,
                    "order": "",
                    "page": ""
                },

                error: function (XmlHttpRequest, textStatus, errorThrown) {
                    alert("错误，请联系管理员!");
                },
                success: function (result) {
                    var obj = result.showapi_res_body;
                    var contentlist = obj.pagebean.contentlist;
                    var content = $(".MMList");
                    $(".row").remove();
                    $.each(contentlist, function (index, obj) {
                        var row = $("<div class='row'></div>");
                        var col = $("<div class='col-xs-12 col-sm-12 col-md-12'></div>");
                        var thumbnail = $(" <div class='thumbnail'>"
                            + " <img src='" + obj.avatarUrl + " ' "
                            + " alt=''> <div class='caption'> "
                            + " <h3>姓名：" + obj.realName + "</h3>"
                            + " <p>所在城市：" + obj.city + "</p>"
                            + " <p>身高：" + obj.height + "CM</p>"
                            + " <p>体重：" + obj.weight + "Kg</p>"
                            + " <p>粉丝数：" + obj.totalFanNum + "</p>"
                            + " <p> "
                            + " <a onclick='seeMoreMM(" + JSON.stringify(obj.imgList) + ");' href='#' class='btn btn-primary' role='button'>"
                            + "   更多写真..."
                            + "  </a>"
                            + "  <a href='" + obj.link + "' class='btn btn-default' role='button'>"
                            + "  去她主页~~ </a> </p> </div> </div>");
                        col.append(thumbnail);
                        row.append(col);
                        content.append(row);
                    });
                }
            });
        }

        function formatterDateTime() {
            var date = new Date()
            var month = date.getMonth() + 1
            var datetime = date.getFullYear()
                + ""// "年"
                + (month >= 10 ? month : "0" + month)
                + ""// "月"
                + (date.getDate() < 10 ? "0" + date.getDate() : date
                    .getDate())
                + ""
                + (date.getHours() < 10 ? "0" + date.getHours() : date
                    .getHours())
                + ""
                + (date.getMinutes() < 10 ? "0" + date.getMinutes() : date
                    .getMinutes())
                + ""
                + (date.getSeconds() < 10 ? "0" + date.getSeconds() : date
                    .getSeconds());
            return datetime;
        }

        function seeMoreMM(mmList) {
            if (!!mmList && mmList.length > 0) {
                var url = "moreMM.html?MMList=" + mmList;
                window.open(url);
            } else {
                alert("暂无数据！");
            }
        }

    </script>
</head>
<body class="container">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">淘妹妹_丐帮提供   </span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">淘妹妹_丐帮提供 </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">欧美 </a></li>
                <li><a href="#">欧美</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
<div class="MMList">
</div>
<footer style="text-align: center;">想获取更多MM,请加入丐帮基地：450342630 （QQ群号）</footer>
</body>
</html>